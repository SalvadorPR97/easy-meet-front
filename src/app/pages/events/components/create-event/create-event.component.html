<main class="container-fluid d-flex justify-content-between align-items-center gap-5 my-3 formBg">
  <form class="col-6" [formGroup]="eventForm" (ngSubmit)="onSubmit()">
    <h3 class="text-center">Nuevo Evento</h3>

    <div class="mb-3">
      <label class="form-label">Categoría Principal</label>
      <select class="form-select" formControlName="category"
              (change)="getSubcategories($event)">
        <option value="" disabled selected>Seleccione Categoría…</option>
        @for (category of categories; track category.id) {
          <option [value]="category.id">{{ category.name }}</option>
        }
      </select>
    </div>

    <div class="mb-3">
      <label class="form-label">Subcategoría</label>
      <select class="form-select" formControlName="subcategory">
        <option value="" disabled selected>Seleccione Subcategoría…</option>
        @if (subcategories.length > 0) {
          @for (subcategory of subcategories; track subcategory.id) {
            <option [value]="subcategory.id">{{ subcategory.name }}</option>
          }
        }
      </select>
    </div>

    <div class="mb-3">
      <label class="form-label">Título</label>
      <input type="text" class="form-control" formControlName="title">
    </div>

    <div class="mb-3">
      <label class="form-label">Dirección del Evento</label>
      <input type="text" class="form-control" formControlName="location">
    </div>

    <div class="mb-3">
      <label class="form-label">Imagen</label>
      <input type="file" class="form-control" accept="image/*">
    </div>

    <div class="mb-3 col">
      <label class="form-label">Fecha del Evento</label>
      <input type="date" class="form-control" formControlName="date" [min]="minDate">
    </div>

    <div class="row">
      <div class="mb-3 col">
        <label class="form-label">Hora Inicio</label>
        <input type="time" class="form-control" formControlName="startTime">
      </div>
      <div class="mb-3 col">
        <label class="form-label">Hora Fin</label>
        <input type="time" class="form-control" formControlName="endTime">
      </div>
      <div class="mb-3 col">
        <label class="form-label">Mín. Personas</label>
        <input type="number" class="form-control" formControlName="minParticipant" min="0" placeholder="0">
      </div>
      <div class="mb-3 col">
        <label class="form-label">Máx. Personas</label>
        <input type="number" class="form-control" formControlName="maxParticipant" min="2" placeholder="2">
      </div>
      <div class="mb-3 col">
        <label class="form-label">Precio (€)</label>
        <input type="number" class="form-control" formControlName="price" min="0" placeholder="0">
      </div>
    </div>

    <div class="mb-3">
      <label class="form-label">Descripción</label>
      <textarea class="form-control" formControlName="description" rows="3"></textarea>
    </div>

    <button type="submit" class="btn btnForm mb-3 mb-lg-0" [disabled]="eventForm.invalid">
      Crear Evento
    </button>

    @if (sending) {
      <span class="d-inline-block mb-3 mb-lg-0" tabindex="0" data-bs-toggle="tooltip"
            title="Creando y publicando evento, por favor espere">
        <button class="btn btnForm" type="button" disabled>
            <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>
            Creando...
        </button>
      </span>
    }
  </form>

  <div class="d-flex flex-column col-6 gap-2 py-2">
    <img src="assets/img/googlemaps.png" class="rounded-2" alt="Imagen ubicación en google maps">
    <img src="assets/img/googlemaps.png" class="rounded-2" alt="Imagen subida por el usuario">
  </div>
</main>
